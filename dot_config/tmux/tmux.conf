# Themes (use terminal colours to follow tinted-theming)
set -g @tmux_power_theme 'colour4'
set -g @tmux_power_show_upload_speed true
set -g @tmux_power_show_download_speed true

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'wfxr/tmux-power'
set -g @plugin 'wfxr/tmux-net-speed'

# Settings
setw -g mode-keys vi

# Window title (shown in terminal titlebar)
set -g set-titles on
set -g set-titles-string "#S:#I - #{b:pane_current_path}"

# Prefix key: Ctrl+b â†’ Ctrl+a (easier to reach, screen convention)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Mouse support (resize, select, scroll)
set -g mouse on

# Start window/pane index at 1 (matches keyboard layout)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# True Color (24bit) support for Neovim etc.
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Allow DCS passthrough (needed for tinted-shell OSC color sequences to reach Ghostty)
set -g allow-passthrough on

# Transparent background (pass through Ghostty's background-opacity)
set -g window-style 'bg=default'
set -g window-active-style 'bg=default'

# Split panes in current directory
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# workmux dashboard
bind C-s display-popup -h 80% -w 80% -E "workmux dashboard"

# workmux navigation
bind l run-shell "workmux last-done"
bind Tab run-shell "workmux last-agent"

set -g @continuum-restore 'on'
set -g @continuum-save-interval '1'

set -g @resurrect-processes 'vim nvim man less more tail top htop'
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-save 'S'

# Init TMUX Plugin Manager
run '~/.tmux/plugins/tpm/tpm'

# Pane border (after TPM to avoid plugin overrides)
set -g pane-border-indicators off
set -g pane-border-lines single
set -g pane-border-style 'fg=colour19'
set -g pane-active-border-style 'fg=colour19'
